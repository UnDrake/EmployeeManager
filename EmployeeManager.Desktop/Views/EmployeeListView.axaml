<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:EmployeeManager.Desktop.ViewModels"
             x:Class="EmployeeManager.Desktop.Views.EmployeeListView"
             x:DataType="vm:EmployeeListViewModel">

    <UserControl.DataContext>
        <vm:EmployeeListViewModel/>
    </UserControl.DataContext>

    <StackPanel Margin="10">
        <TextBlock Text="Список сотрудников" FontSize="20" Margin="0 0 0 10"/>

        <!-- 🔹 Фильтры -->
		<StackPanel Orientation="Horizontal" Margin="0 0 0 10" Spacing="10">
			<TextBox Text="{Binding SearchName, Mode=TwoWay}" Watermark="Поиск по ФИО" Width="250"/>
			<ComboBox ItemsSource="{Binding Positions}" SelectedItem="{Binding SelectedPosition}" Width="180"/>
			<ComboBox ItemsSource="{Binding Departments}" SelectedItem="{Binding SelectedDepartment}" Width="180"/>
			<TextBox Text="{Binding MinSalaryText, Mode=TwoWay}" Watermark="Мин. зарплата" Width="180"/>
			<TextBox Text="{Binding MaxSalary, Mode=TwoWay}" Watermark="Макс. зарплата" Width="180"/>
			<Button Content="Применить" Command="{Binding ApplyFiltersCommand}" Width="100" Height="30"/>
		</StackPanel>


		<!-- 🔹 Общая таблица с прокруткой -->
        <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" Height="350">
            <StackPanel>
                <!-- 🔹 Заголовки колонок -->
                <Grid ColumnDefinitions="200,150,140,140,200,180,120,250" Background="LightGray">
                    <Border BorderBrush="Black" BorderThickness="1" Grid.Column="0"><TextBlock Text="ФИО" FontWeight="Bold" TextAlignment="Center" Padding="5"/></Border>
                    <Border BorderBrush="Black" BorderThickness="1" Grid.Column="1"><TextBlock Text="Телефон" FontWeight="Bold" TextAlignment="Center" Padding="5"/></Border>
                    <Border BorderBrush="Black" BorderThickness="1" Grid.Column="2"><TextBlock Text="Дата рождения" FontWeight="Bold" TextAlignment="Center" Padding="5"/></Border>
                    <Border BorderBrush="Black" BorderThickness="1" Grid.Column="3"><TextBlock Text="Дата найма" FontWeight="Bold" TextAlignment="Center" Padding="5"/></Border>
                    <Border BorderBrush="Black" BorderThickness="1" Grid.Column="4"><TextBlock Text="Должность" FontWeight="Bold" TextAlignment="Center" Padding="5"/></Border>
                    <Border BorderBrush="Black" BorderThickness="1" Grid.Column="5"><TextBlock Text="Отдел" FontWeight="Bold" TextAlignment="Center" Padding="5"/></Border>
                    <Border BorderBrush="Black" BorderThickness="1" Grid.Column="6"><TextBlock Text="Оклад" FontWeight="Bold" TextAlignment="Center" Padding="5"/></Border>
                    <Border BorderBrush="Black" BorderThickness="1" Grid.Column="7"><TextBlock Text="Адрес" FontWeight="Bold" TextAlignment="Center" Padding="5"/></Border>
                </Grid>

                <!-- 🔹 Список сотрудников с кастомными стилями -->
                <ListBox ItemsSource="{Binding Employees}" SelectedItem="{Binding SelectedEmployee}" Height="300"
                         BorderThickness="1" BorderBrush="Black">
                    <ListBox.Styles>
                        <Style Selector="ListBoxItem">
                            <Setter Property="Margin" Value="0"/>
                            <Setter Property="Padding" Value="0"/>
                            <Setter Property="Background" Value="Transparent"/>
                        </Style>
                    </ListBox.Styles>

                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Grid ColumnDefinitions="200,150,140,140,200,180,120,250">
                                <Border BorderBrush="Gray" BorderThickness="1" Grid.Column="0"><TextBlock Text="{Binding FullName}" TextAlignment="Center" Padding="5"/></Border>
                                <Border BorderBrush="Gray" BorderThickness="1" Grid.Column="1"><TextBlock Text="{Binding Phone}" TextAlignment="Center" Padding="5"/></Border>
                                <Border BorderBrush="Gray" BorderThickness="1" Grid.Column="2"><TextBlock Text="{Binding BirthDate, StringFormat='yyyy-MM-dd'}" TextAlignment="Center" Padding="5"/></Border>
                                <Border BorderBrush="Gray" BorderThickness="1" Grid.Column="3"><TextBlock Text="{Binding HireDate, StringFormat='yyyy-MM-dd'}" TextAlignment="Center" Padding="5"/></Border>
                                <Border BorderBrush="Gray" BorderThickness="1" Grid.Column="4"><TextBlock Text="{Binding Position}" TextAlignment="Center" Padding="5"/></Border>
                                <Border BorderBrush="Gray" BorderThickness="1" Grid.Column="5"><TextBlock Text="{Binding Department}" TextAlignment="Center" Padding="5"/></Border>
                                <Border BorderBrush="Gray" BorderThickness="1" Grid.Column="6"><TextBlock Text="{Binding Salary}" TextAlignment="Center" Padding="5"/></Border>
                                <Border BorderBrush="Gray" BorderThickness="1" Grid.Column="7"><TextBlock Text="{Binding Address}" TextAlignment="Center" Padding="5"/></Border>
                            </Grid>
                        </DataTemplate> 
                    </ListBox.ItemTemplate>
                </ListBox>
            </StackPanel>
        </ScrollViewer>

        <!-- 🔹 Управление -->
        <StackPanel Orientation="Horizontal" Margin="10 0 0 10" Spacing="10">
            <Button Content="Добавить" Command="{Binding AddEmployeeCommand}" Width="120" Height="35"/>
            <Button Content="Изменить" Command="{Binding UpdateEmployeeCommand}" Width="120" Height="35"/>
            <Button Content="Удалить" Command="{Binding DeleteEmployeeCommand}" Width="120" Height="35"/>
            <Button Content="Обновить" Command="{Binding RefreshCommand}" Width="120" Height="35"/>
			<Button Content="Создать отчет" Command="{Binding OpenSalaryReportWindowCommand}" Width="120" Height="35"/>
		</StackPanel>
    </StackPanel>
</UserControl>
